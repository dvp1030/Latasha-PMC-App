<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goods Management</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@600&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Apply bold font to all elements */
        * {
            font-weight: bold;
        }

        body {
            background-color: #f0f4f8;
            font-family: 'Roboto', sans-serif;
        }
        .container {
            margin-top: 50px;
            padding: 40px;
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        h2 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700; /* Already bold due to global rule */
            color: #333333;
            margin-bottom: 30px;
        }
        .form-control, .form-select {
            border-radius: 8px;
            font-weight: bold; /* Ensures consistency */
        }
        .btn-success {
            background-color: #28a745;
            border-color: #28a745;
            font-weight: bold;
        }
        .btn-success:hover {
            background-color: #218838;
            border-color: #1e7e34;
        }
        .btn-warning {
            background-color: #ffc107;
            border-color: #ffc107;
            color: #212529;
            font-weight: bold;
        }
        .btn-warning:hover {
            background-color: #e0a800;
            border-color: #d39e00;
            color: #212529;
        }
        .goods-item {
            padding: 20px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            margin-bottom: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .goods-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .goods-details {
            color: #6c757d;
            font-weight: bold; /* Overridden to bold */
        }
        .small-font {
            font-size: 0.85rem;
            color: #6c757d;
            font-weight: bold; /* Overridden to bold */
        }
        .percentage-label {
            font-weight: bold;
            color: #343a40;
        }
        /* Modal Styling */
        .modal-header {
            background-color: #343a40;
            color: #ffffff;
            border-bottom: none;
        }
        .modal-footer {
            border-top: none;
        }
        /* "No Goods" Message Styling */
        .no-goods {
            text-align: center;
            color: #6c757d;
            margin-top: 50px;
        }
        .no-goods i {
            font-size: 4rem;
            color: #adb5bd;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2 class="text-center">Goods Management</h2>

        <!-- Add Good Form -->
        <div class="card mb-4">
            <div class="card-body">
                <form action="{{ url_for('add_good') }}" method="POST">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="goodsName" class="form-label">Goods Name</label>
                            <input type="text" class="form-control" id="goodsName" name="goodsName" placeholder="Enter goods name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="quantity" class="form-label">Quantity <span class="text-muted">(optional)</span></label>
                            <input type="number" class="form-control" id="quantity" name="quantity" placeholder="Leave blank if not applicable">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="unit" class="form-label">Unit</label>
                        <select class="form-select" id="unit" name="unit" required>
                            <!-- Length and Area -->
                            <option value="meters">Meters (m)</option>
                            <option value="centimeters">Centimeters (cm)</option>
                            <option value="millimeters">Millimeters (mm)</option>
                            <option value="square_meters">Square Meters (m²)</option>
                            <option value="square_feet">Square Feet (ft²)</option>
                            <!-- Volume -->
                            <option value="cubic_meters">Cubic Meters (m³)</option>
                            <option value="cubic_feet">Cubic Feet (ft³)</option>
                            <!-- Weight -->
                            <option value="kilograms">Kilograms (kg)</option>
                            <option value="metric_tons">Metric Tons (tonnes)</option>
                            <option value="pounds">Pounds (lbs)</option>
                            <!-- Distance -->
                            <option value="kilometers">Kilometers (km)</option>
                            <option value="inches">Inches (in)</option>
                            <!-- Temperature -->
                            <option value="celsius">Celsius (°C)</option>
                            <option value="fahrenheit">Fahrenheit (°F)</option>
                            <!-- Angle -->
                            <option value="degrees">Degrees (°)</option>
                            <!-- Capacity -->
                            <option value="liters">Liters (L)</option>
                            <option value="gallons">Gallons (gal)</option>
                            <!-- Time -->
                            <option value="hours">Hours (h)</option>
                            <option value="days">Days (d)</option>
                            <!-- Power and Energy -->
                            <option value="watts">Watts (W)</option>
                            <option value="kilowatt_hours">Kilowatt-hours (kWh)</option>
                            <!-- Pressure -->
                            <option value="pascals">Pascals (Pa)</option>
                            <option value="bars">Bars (bar)</option>
                            <!-- Concrete and Brick Units -->
                            <option value="bricks_per_square_meter">Bricks per Square Meter</option>
                            <!-- Miscellaneous -->
                            <option value="decibels">Decibels (dB)</option>
                            <option value="lux">Lux (lx)</option>
                            <option value="percentage">Percentage (%)</option> <!-- Added percentage to units -->
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="percentage" class="form-label small-font">Percentage (if applicable)</label>
                        <div class="d-flex justify-content-between mb-1">
                            <span>0%</span>
                            <span>100%</span>
                        </div>
                        <input type="range" class="form-range" id="percentage" name="percentage" min="0" max="100" value="0" oninput="updatePercentageValue(this.value)">
                        <div class="percentage-label mt-1">
                            Current Percentage: <span id="percentageValue">0</span>%
                        </div>
                        <small class="small-font">Adjust the percentage as needed.</small>
                    </div>
                    <div class="text-end">
                        <button type="submit" class="btn btn-success">Add Good</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Displaying Added Goods -->
        <div class="goods-list">
            {% if goods %}
                {% for good in goods %}
                <div class="goods-item">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h5>{{ loop.index }}. {{ good[1] }}</h5> <!-- Numbering added -->
                            <p class="goods-details mb-1">Quantity: <span>{{ good[2] if good[2] else 'Not specified' }}</span> {{ good[3] }}</p>
                            {% if good[4] %}
                            <p class="goods-details mb-0">Percentage: <span>{{ good[4] }}%</span></p>
                            {% endif %}
                        </div>
                        <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#editModal" onclick="populateEditModal('{{ good[0] }}', '{{ good[1] }}', '{{ good[2] if good[2] else '' }}', '{{ good[3] }}', '{{ good[4] if good[4] else 0 }}')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>
                {% endfor %}
            {% else %}
            <div class="no-goods">
                <i class="fas fa-box-open"></i>
                <h4>No Goods Added Yet</h4>
                <p class="text-muted">Start by adding some goods to manage them effectively.</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 id="editModalLabel" class="modal-title">Edit Good</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="{{ url_for('edit_good') }}" method="POST">
                    <div class="modal-body">
                        <input type="hidden" id="editGoodId" name="id">
                        <div class="mb-3">
                            <label for="editGoodsName" class="form-label">Goods Name</label>
                            <input type="text" class="form-control" id="editGoodsName" name="goodsName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editQuantity" class="form-label">Quantity <span class="text-muted">(optional)</span></label>
                            <input type="number" class="form-control" id="editQuantity" name="quantity" placeholder="Leave blank if not applicable">
                        </div>
                        <div class="mb-3">
                            <label for="editUnit" class="form-label">Unit</label>
                            <select class="form-select" id="editUnit" name="unit" required>
                                <!-- Same units as the add form -->
                                <option value="meters">Meters (m)</option>
                                <option value="centimeters">Centimeters (cm)</option>
                                <option value="millimeters">Millimeters (mm)</option>
                                <option value="square_meters">Square Meters (m²)</option>
                                <option value="square_feet">Square Feet (ft²)</option>
                                <!-- Volume -->
                                <option value="cubic_meters">Cubic Meters (m³)</option>
                                <option value="cubic_feet">Cubic Feet (ft³)</option>
                                <!-- Weight -->
                                <option value="kilograms">Kilograms (kg)</option>
                                <option value="metric_tons">Metric Tons (tonnes)</option>
                                <option value="pounds">Pounds (lbs)</option>
                                <!-- Distance -->
                                <option value="kilometers">Kilometers (km)</option>
                                <option value="inches">Inches (in)</option>
                                <!-- Temperature -->
                                <option value="celsius">Celsius (°C)</option>
                                <option value="fahrenheit">Fahrenheit (°F)</option>
                                <!-- Angle -->
                                <option value="degrees">Degrees (°)</option>
                                <!-- Capacity -->
                                <option value="liters">Liters (L)</option>
                                <option value="gallons">Gallons (gal)</option>
                                <!-- Time -->
                                <option value="hours">Hours (h)</option>
                                <option value="days">Days (d)</option>
                                <!-- Power and Energy -->
                                <option value="watts">Watts (W)</option>
                                <option value="kilowatt_hours">Kilowatt-hours (kWh)</option>
                                <!-- Pressure -->
                                <option value="pascals">Pascals (Pa)</option>
                                <option value="bars">Bars (bar)</option>
                                <!-- Concrete and Brick Units -->
                                <option value="bricks_per_square_meter">Bricks per Square Meter</option>
                                <!-- Miscellaneous -->
                                <option value="decibels">Decibels (dB)</option>
                                <option value="lux">Lux (lx)</option>
                                <option value="percentage">Percentage (%)</option> <!-- Added percentage to units -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editPercentage" class="form-label small-font">Percentage (if applicable)</label>
                            <div class="d-flex justify-content-between mb-1">
                                <span>0%</span>
                                <span>100%</span>
                            </div>
                            <input type="range" class="form-range" id="editPercentage" name="percentage" min="0" max="100" value="0" oninput="updateEditPercentageValue(this.value)">
                            <div class="percentage-label mt-1">
                                Current Percentage: <span id="editPercentageValue">0</span>%
                            </div>
                            <small class="small-font">Adjust the percentage as needed.</small>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary">Close</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function updatePercentageValue(value) {
            document.getElementById('percentageValue').textContent = value;
        }

        function updateEditPercentageValue(value) {
            document.getElementById('editPercentageValue').textContent = value;
        }

        function populateEditModal(id, name, quantity, unit, percentage) {
            // Populate the modal with the clicked item's data
            document.getElementById('editGoodId').value = id;
            document.getElementById('editGoodsName').value = name;
            document.getElementById('editQuantity').value = quantity;
            document.getElementById('editUnit').value = unit;
            document.getElementById('editPercentage').value = percentage;
            document.getElementById('editPercentageValue').textContent = percentage;
        }
    </script>
</body>
</html>
